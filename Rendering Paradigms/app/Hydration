â­ What is Hydration?

Hydration is the process where React takes the already-rendered HTML from the server and attaches JavaScript to it so the page becomes interactive.

ğŸ” Why hydration exists

When using SSR (Server-Side Rendering) or SSG (Static Site Generation):

The server sends fully rendered HTML to the browser
â†’ Fast first paint
â†’ Search engine friendly

But HTML alone cannot handle:

onClick handlers

useState

useEffect

Updating the UI dynamically

So React must â€œwake upâ€ the page.

ğŸ§  What actually happens during hydration?
Step 1 â€” Server sends HTML

Server output:

<div id="root">
  <button>Like</button>
  <p>5 likes</p>
</div>


This looks right but nothing works yet.

Step 2 â€” Browser loads JS bundle

React loads the component code.

Step 3 â€” React hydrates the HTML

React attaches:

event listeners

component state

hooks behavior

so the page becomes fully interactive.

ğŸ¯ Example
Server-output HTML (before hydration)

Looks like this in DevTools:

<button>Like</button>
<p>5 likes</p>


If you click the button now â†’ nothing happens.

After hydration

React attaches your onClick:

<button onClick={() => setLikes(likes + 1)}>Like</button>


Now clicking increments the number.

ğŸ”¥ Hydration happens only for Client Components

Server Components:

remain static HTML

do not hydrate

have no browser JS

cannot use window, localStorage, etc.

Client Components:

download JS

hydrate

become interactive

ğŸ“¦ Hydration in Next.js App Router

Server Components â†’ no hydration

Client Components â†’ hydration occurs

Mixed components â†’ only client parts hydrate

ğŸ” In Summary
Concept	Meaning
SSR output	HTML generated on server
Hydration	Attaching JS + events to static HTML
Client Component	Hydrated
Server Component	Not hydrated

Hydration error:Hydration errors are mismatches between what React rendered on the server vs what React expects to render on the client.

They happen during hydration, when React tries to attach JavaScript to server-rendered HTML.

ğŸ”¥ ğŸ”¥ What Exactly Is a Hydration Error?

A hydration error happens when:

The HTML generated on the server

IS NOT THE SAME AS

The HTML React expects in the browser

So React cannot â€œmatchâ€ them during hydration, and it complains:

Warning: Text content does not match server-rendered HTML.


or

Hydration failed because the initial UI does not match what was rendered on the server.

â­ Why must server & client HTML match?

Because during hydration:

React DOES NOT RE-RENDER the component

It compares the server HTML and what the client component would render

If they differ â†’ React cannot safely attach event handlers â†’ hydration error

ğŸ”¥ Top 5 Causes of Hydration Errors

Here are the real reasons:

1. Using Browser-only APIs on the server

Examples:

console.log(window); 
localStorage.getItem()  
document.querySelector()


Server has no window, so rendering becomes inconsistent.

2. Using dynamic values during SSR

Example:

<h1>{Math.random()}</h1>
<h1>{new Date().toString()}</h1>


Server renders:
3.1412

Client renders:
9.4567

Mismatch â†’ hydration error.

3. Conditional UI that depends on browser state
const isMobile = window.innerWidth < 600;
return <h1>{isMobile ? "Mobile" : "Desktop"}</h1>;


Server cannot know screen size â†’ mismatch.

4. useEffect being misused

Hydration happens before useEffect runs.

So if UI depends on something updated in useEffect, React first sees a mismatch.

Example:

const [width, setWidth] = useState(0);

useEffect(() => {
  setWidth(window.innerWidth);
}, []);

return <p>{width}</p>;


Server renders:
0

Client renders (before effect finishes):
0

Still okay.

But if you do:

const [width] = useState(window.innerWidth);


This causes mismatch.

5. Using async logic inside a Client Component

Client components cannot be async:

"use client"

const MyComponent = async () => { ... }


This can cause hydration failures.

ğŸ¯ Hydration Errors in Next.js App Router

In Next.js 13/14:

Server Components do not hydrate â†’ cannot cause hydration errors

Client Components hydrate â†’ can cause hydration errors

So hydration errors occur ONLY in:

"use client" components

Components rendered inside a client component

â­ Hydration Errors Examples (VERY CLEAR)
âŒ Issue
<h1>{new Date().toLocaleTimeString()}</h1>


Server time â‰  client time â†’ mismatch.

Result
Warning: Expected server HTML to contain text... but got...

âœ” How to Fix Hydration Errors
1. Move dynamic values into useEffect
"use client";
import { useEffect, useState } from "react";

export default function Time() {
  const [time, setTime] = useState("");

  useEffect(() => {
    setTime(new Date().toLocaleTimeString());
  }, []);

  return <h1>{time}</h1>;
}


Now:

Server renders empty HTML

Client fills it after hydration

No mismatch

â­ Summary (One Line)

Hydration errors happen when the server-rendered HTML does not match the HTML React expects during hydration in the browser.